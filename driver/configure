#!/bin/sh

pscnv_exist=$(lsmod | grep pscnv | wc -l)
nouveau_exist=$(lsmod | grep nouveau | wc -l)
driver=''

if [ ! $pscnv_exist -eq 0 ] ; then
	driver='pscnv'
elif [ ! $nouveau_exist -eq 0 ] ; then
	driver='nouveau'
fi

echo "Detecting device driver... $driver"
touch ./Driver.mk
echo "DRIVER_NAME=$driver" > ./Driver.mk

gdev='gdev'
common='common'

# debug on/off
debug=0

# parse the given options.
for option
do
  case "$option" in
  -*=*) optarg=`echo "$option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) optarg= ;;
  esac

  case "$option" in
  --debug)
    debug=1 ;;
  esac
done

cp -fr ../$gdev/* ./
cp -fr ../../$common/* ./
